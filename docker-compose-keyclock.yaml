# openssl req -x509 -newkey rsa:4096 -nodes -keyout certs/privkey.pem -out certs/fullchain.pem -days 365 -subj "//CN=localhost"
version: "3.8"
services:
  keycloak:
    image: quay.io/keycloak/keycloak:latest
    container_name: keycloak
    ports:
      - "8443:8443"
    environment:
      KC_HTTP_ENABLED: "false"
      KC_HTTPS_CERTIFICATE_FILE: "/etc/x509/https/tls.crt"
      KC_HTTPS_CERTIFICATE_KEY_FILE: "/etc/x509/https/tls.key"
      KC_HOSTNAME: "localhost"
      KC_BOOTSTRAP_ADMIN_USERNAME: "admin"
      KC_BOOTSTRAP_ADMIN_PASSWORD: "admin"
    volumes:
      - ./certs/fullchain.pem:/etc/x509/https/tls.crt:ro
      - ./certs/privkey.pem:/etc/x509/https/tls.key:ro
      - ./.containers/identity:/opt/keycloak/data
    command: ["start-dev"]